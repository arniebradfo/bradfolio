// structure.scss

html, body{
  height: 100%;
  width:  100%;
  position: relative;
  overflow: hidden;
  padding: 0;
  margin: 0;
  background-color: #aaa;
}

$mainNavWIDTH: fib(13);
$drawerWIDTH: 80%;
$mainContentSCALE: 0.9;

$mainContentINSET: $borderRADIUS;
$mainContentOFFSET: $scrollBarWIDTH + $boxShadowBLUR + $boxShadowSPREAD;
$mainContentSPACING: $mainContentOFFSET + $mainContentINSET;

$mainContentBufferX: 50px; // arbitrary value

.header{
	z-index: index($z-of, header);
	@include fixed(0);
	height: 100%;
}

.mainContent{
	z-index: index($z-of, mainContent);
	@include parallaxContainer();
	@include transition(transform);
	overflow-y: scroll;
	overflow-x: hidden;
	margin: (-($mainContentSPACING + $mainContentBufferX)) (-$mainContentSPACING);
	padding: ($mainContentOFFSET + $mainContentBufferX) $mainContentOFFSET;
	@include fixed(0);
	transform-origin: $mainContentOFFSET center;
}

#mainNav--toggle{
	z-index: index($z-of, mainNav--opener);
	@include fixed(0 null null 0);
}

.body{
	&--mainNavOpen{
		.mainContent--active{
			transform: translateX($drawerWIDTH) scale($mainContentSCALE);
		}
	}
	&--mainNavClosed{
		.mainNav{
			display: none;
		}
	}
}

.mainNav{
	display: flex;
	flex-direction: column;
	z-index: index($z-of, mainNav);
	@include absolute(0);
	width: $mainNavWIDTH;
	&__menu{
		flex-grow: 1;
		overflow: hidden;
		height: 100%;
		> ul{
			margin-right: (-$scrollBarWIDTH);
			padding-right: $scrollBarWIDTH;
			overflow-y: scroll;
			overflow-x: hidden;
			height: 100%;
		}
	}
}

.postList{
	&Wrapper{
		@include fixed(0);
		overflow-y: scroll;
		overflow-x: hidden;
		margin-right: (-$scrollBarWIDTH);
		padding-right: 100% - $drawerWIDTH;
		@include parallaxContainer();
		perspective-origin: calc( #{($drawerWIDTH / 2)} + #{($mainNavWIDTH / 2)} );
		padding-left: $mainNavWIDTH;
	}
	&--aside{
		z-index: index($z-of, postList--aside);
	}
}

.frame, .footer{
	padding: 0 $mainContentINSET;
}

.frame{
	border-bottom-left-radius:  $borderRADIUS;
	border-bottom-right-radius: $borderRADIUS;
}

.footer{
	border-radius: $borderRADIUS;
}

.cover{
	padding: $mainContentINSET;
}
